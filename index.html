<!DOCTYPE html>
<html>
<head>
    <title>Продвинутая модель Солнечной системы</title>
    <style>
        body {
            background: #000;
            margin: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-family: Arial;
        }

        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            z-index: 1000;
        }

        .star {
            position: absolute;
            width: 1px;
            height: 1px;
            background: white;
            border-radius: 50%;
        }

        .constellation {
            position: absolute;
            height: 1px;
            background: rgba(255,255,255,0.1);
        }

        .solar-system {
            position: relative;
            transform-origin: center center;
            transition: transform 0.3s;
        }

        .planet {
            position: absolute;
            border-radius: 50%;
            background-size: cover;
            transform-origin: 50% 50%;
        }

        .asteroid {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #888;
            border-radius: 50%;
        }

        .orbit-line {
            position: absolute;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .info-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            backdrop-filter: blur(5px);
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button onclick="toggleTime()">⏯️</button>
        <button onclick="timeScale *= 2">⏩</button>
        <button onclick="timeScale /= 2">⏪</button>
        <span id="timeDisplay"></span>
    </div>
    <div class="info-panel" id="infoPanel"></div>
    <div class="solar-system" id="solarSystem"></div>

    <script>
        // Конфигурация
        const PLANET_TEXTURES = {
            'Mercury': 'https://i.imgur.com/3fYQjqW.jpg',
            'Venus': 'https://i.imgur.com/7HZS3Uw.jpg',
            'Earth': 'https://i.imgur.com/6hS7VzT.jpg',
            'Mars': 'https://i.imgur.com/WHL9Kk0.jpg',
            'Jupiter': 'https://i.imgur.com/5r2Vh3X.jpg',
            'Saturn': 'https://i.imgur.com/6dwlIGT.jpg',
            'Uranus': 'https://i.imgur.com/tX3bDq5.jpg',
            'Neptune': 'https://i.imgur.com/A5X4bXb.jpg'
        };

        const ASTEROID_COUNT = 500;
        let isTimeRunning = true;
        let timeScale = 1;
        let currentDate = new Date();

        // Инициализация
        const solarSystem = document.getElementById('solarSystem');
        const infoPanel = document.getElementById('infoPanel');
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        document.body.appendChild(canvas);

        // Создание фона
        function createBackground() {
            // Звезды
            for(let i = 0; i < 1000; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                document.body.appendChild(star);
            }

            // Созвездия
            const constellations = [
                [[10, 20], [15, 25], [20, 30]],
                [[70, 40], [75, 45], [80, 50]]
            ];

            constellations.forEach(cons => {
                for(let i = 0; i < cons.length - 1; i++) {
                    const line = document.createElement('div');
                    line.className = 'constellation';
                    const [x1, y1] = cons[i];
                    const [x2, y2] = cons[i+1];
                    line.style.width = Math.sqrt((x2-x1)**2 + (y2-y1)**2) + '%';
                    line.style.left = x1 + '%';
                    line.style.top = y1 + '%';
                    line.style.transform = `rotate(${Math.atan2(y2-y1, x2-x1)}rad)`;
                    document.body.appendChild(line);
                }
            });
        }

        // Инициализация планет
        async function initPlanets() {
            const response = await fetch('https://api.astronomyapi.com/planets');
            const data = await response.json();
            
            data.planets.forEach(planet => {
                const elem = document.createElement('div');
                elem.className = 'planet';
                elem.style.width = planet.size + 'px';
                elem.style.height = planet.size + 'px';
                elem.style.backgroundImage = `url(${PLANET_TEXTURES[planet.name]})`;
                elem.dataset.name = planet.name;
                
                // Орбитальная линия
                const orbit = document.createElement('div');
                orbit.className = 'orbit-line';
                orbit.style.width = planet.orbitRadius * 2 + 'px';
                orbit.style.height = planet.orbitRadius * 2 + 'px';
                solarSystem.appendChild(orbit);
                solarSystem.appendChild(elem);

                elem.addEventListener('click', () => showPlanetInfo(planet));
            });
        }

        // Астероидный пояс
        function createAsteroidBelt() {
            for(let i = 0; i < ASTEROID_COUNT; i++) {
                const asteroid = document.createElement('div');
                asteroid.className = 'asteroid';
                asteroid.style.transform = `rotate(${Math.random() * 360}deg) 
                    translate(${300 + Math.random() * 100}px)`;
                solarSystem.appendChild(asteroid);
            }
        }

        // Анимация
        function animate() {
            if(isTimeRunning) {
                currentDate = new Date(currentDate.getTime() + 86400000 * timeScale);
                document.getElementById('timeDisplay').textContent = currentDate.toISOString().split('T')[0];
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Обновление позиций планет (с реальными астрономическими расчетами)
            updatePlanetPositions(currentDate);

            requestAnimationFrame(animate);
        }

        // Показ информации о планете
        async function showPlanetInfo(planet) {
            const response = await fetch(`https://api.astronomyapi.com/planets/${planet.name}`);
            const data = await response.json();
            
            infoPanel.innerHTML = `
                <h2>${data.name}</h2>
                <p>Температура: ${data.temperature}</p>
                <p>Сутки: ${data.dayLength}</p>
                <p>Год: ${data.yearLength}</p>
                <p>Спутники: ${data.moons}</p>
                <p>Расстояние от Солнца: ${data.distance} км</p>
            `;
        }

        // Управление временем
        function toggleTime() {
            isTimeRunning = !isTimeRunning;
        }

        // Ресайз канваса
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        // Инициализация
        window.addEventListener('load', async () => {
            createBackground();
            await initPlanets();
            createAsteroidBelt();
            resizeCanvas();
            animate();
        });

        window.addEventListener('resize', resizeCanvas);
    </script>
</body>
</html>
